<div class="annotation"
     [ngStyle]="styleBox()"
     (mouseenter)="onBoxEnter()" (mouseleave)="onBoxLeave()">

  <div class="annotation__content">
    @if (editing()) {
      <textarea #editor class="annotation__editor"
                (blur)="commitEdit(editor.value)"></textarea>
    } @else {
      <div class="annotation__text">
        {{ ann().text }}
      </div>
    }
  </div>

  <div class="annotation__controls"
       [class.annotation__controls--visible]="showControls()"
       (mouseenter)="onCtrlsEnter()" (mouseleave)="onCtrlsLeave()">
    <button class="annotation__handle annotation__handle--move" title="Перетащить"
            (pointerdown)="onDragStart($event)">✥</button>
    <button class="annotation__handle annotation__handle--edit" title="Редактировать"
            (click)="enableEdit()">✎</button>
    <button class="annotation__handle annotation__handle--delete" title="Удалить"
            (click)="delete()">✕</button>
  </div>
</div>

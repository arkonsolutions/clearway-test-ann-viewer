# clearway-test-ann-viewer
Тестовый проект по заданию от ClearWay.

# Стек 
* Angular 20

# Развёртывание
* Требуется Node.js весии >= 20.19
  ```
  Для переключения и установки последних версий нод удобно использовать Node Version Manager (https://github.com/coreybutler/nvm-windows/releases). ..."nvm install 20.19" -> "nvm use 20.19"
  ```

# Ограничения
* Нельзя использовать внешние библиотеки, кроме UI китов.


# Функционал
* Интерфейс обёртка (Shell) с кнопками управления и полем для отображения документа.
* Документ состоит из страниц. Содержимое страницы это картинка поверх которой пользователь может добавлять текстовые аннотации.
* Аннотации могут быть добавлены к документу и закреплены в определённой координате страниц.


# Проблемы / Решения
* Если при открытии документа просто вывести все страницы документа(изображения) сразу, как есть, это может негативно повлиять на скорость открытия первого листа(который мы видим) за счёт подгрузки всех листов(которые мы даже не видим пока).
  * Решение: Использовать блок @defer, который позволит начать подгрузку компонента (и картинки) страницы только тогда, когда страница подскроллена на место, где пользователь действительно может увидеть эту страницу.
* Чтобы правильно вывести Заглушку страницы для @placeholder(@defer), нам желательно знать её соотношение сторон и размер.
  * Решение: Используем для Заглушки страницы по умолчанию соотношение сторон листа A4. А размер будет считаться из ширины просмотрщика документа минус padding * коэффециент масштаба(который мы меняем при помощи zoom +/-)
* При масштабировании документа не очень удобно пересчитывать координаты Аннотаций в пределах картинки
  * Решение: Для упрощения работы с координатами Аннотаций, для их координат используется не координата пикселя картинки, а как бы пропорциональная коодината расположения на странице от 0 до 1. 